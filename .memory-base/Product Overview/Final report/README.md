Итоговый отчёт: структура и представление

Назначение: единая структура итогового отчёта для пользователя на основе распознанных метрик, активной весовой таблицы и рекомендаций.

Состав отчёта (UI/HTML/PDF)
- Шапка
  - ФИО участника; дата; профдеятельность; версия весовой таблицы
- Итоговый коэффициент
  - `score_pct` (0..100), визуализация (прогресс/диаграмма)
- Сильные стороны (3–5)
  - Наименование, связанная метрика(и), краткая обоснованность
- Зоны развития (3–5)
  - Наименование, связанная метрика(и), рекомендуемые действия
- Рекомендации по обучению
  - Курсы/тренинги/материалы с ссылками и приоритетом
- Примечания
  - Источник/уверенность распознавания; версия алгоритма/весов
- Приложение
  - Таблица метрик: код, имя, значение, единицы, вес, вклад в итог

Структура данных (JSON)
{
  "participant_id": "uuid",
  "prof_activity_code": "string",
  "weight_table_id": "uuid",
  "score_pct": 87.5,
  "strengths": [
    {"title": "Коммуникация", "metric_codes": ["COMMUNICATION_CLARITY"], "reason": "Высокое значение по ясности речи"}
  ],
  "dev_areas": [
    {"title": "Планирование", "metric_codes": ["PLANNING_ACCURACY"], "actions": ["Использовать тайм-боксы", "Ретроспективы раз в неделю"]}
  ],
  "recommendations": [
    {"title": "Курс по переговорам", "link_url": "https://...", "priority": 1}
  ],
  "metrics": [
    {"code": "COMMUNICATION_CLARITY", "name": "Ясность речи", "value": 4.6, "unit": "балл", "weight": 0.15, "contribution": 0.69, "source": "OCR", "confidence": 0.92}
  ],
  "notes": "OCR confidence средний 0.88; часть значений подтверждена вручную"
}

Рендеринг
- HTML шаблон + экспорт PDF (WeasyPrint/wkhtmltopdf) или DOCX (python-docx)
- Для стабильности версионируйте шаблон отчёта; храните итог как артефакт (file_ref)

