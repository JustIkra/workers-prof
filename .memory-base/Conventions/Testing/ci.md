CI и quality gates

Шаги пайплайна
- Lint: Ruff/Black, фронт — ESLint.
- Unit/Integration: pytest с покрытием; Vitest для фронта.
- E2E (опционально на nightly): Playwright.

Гейты
- На этапе MVP: порог покрытия backend ≥ 60% (общ.), для критичных модулей — ≥ 80% (отдельная проверка по пути/маркерам).
- После стабилизации: поднять порог до 70%/85%.
- Запрещены внешние HTTP вызовы (проверка через запрет сетей в pytest).
- Маркеры `integration` и `e2e` запускаются отдельно (можно по метке в PR).

Артефакты
- Отчёты покрытия (XML/HTML), логи тестов, Playwright видео/скриншоты на падениях.

Политика PR
- Изменения API требуют хотя бы одного integration‑теста.
- Критические баг‑фиксы — тест, воспроизводящий регрессию.
- E2E: запуск вручную или nightly (по расписанию), в зависимости от нагрузки стенда.
