ID: BUG-004
Title: Неправильное отображение всплывающих окон (popover/dropdown/datepicker) — чёрные и полупрозрачные, не соответствуют стилю сайта
Type: bug
Priority: P2
Status: Open
Owner: frontend
Created: 2025-11-11

Кратко
— Все всплывающие элементы Element Plus (меню пользователя, выпадающие списки, datepicker и пр.) рендерятся с тёмным полупрозрачным фоном и низкой контрастностью текста. Это визуально не совпадает с общей светлой темой приложения и ухудшает читабельность.

Контекст/наблюдения
— Видно на: меню пользователя в шапке, селект при загрузке отчёта, выбор профобласти в расчёте, календарь (datepicker).
— Фон чёрный/тёмно‑серый с прозрачностью, текст частично «проваливается» в подложку страницы.
— Похоже, что применяется тёмная тема popper/overlay или переопределённая переменная Element Plus для оверлеев.

Окружение
— macOS 15 (Darwin 25.0.0), локальная среда, текущая ветка; наблюдается в актуальном Chrome.

Шаги воспроизведения
1) Залогиниться под админом.
2) Клик по аватару/почте в шапке — открыть меню пользователя.
3) На странице отчётов открыть диалог «Загрузить отчёт», раскрыть селект «Тип отчёта».
4) На странице участника открыть «Рассчитать профпригодность», раскрыть селект профобласти.
5) В формах с датой открыть календарь (datepicker).

Фактический результат
— Всплывающие элементы имеют чёрный полупрозрачный фон, несоответствующие цвет/контраст и «просвечивающуюся» подложку.

Ожидаемый результат
— Всплывающие элементы оформлены в светлой теме приложения: непрозрачный светлый фон, корректный цвет текста, стандартные тени/границы Element Plus; соответствие дизайну остальных контролов.

Предполагаемая причина
— Переопределение CSS‑переменных Element Plus (например, --el-bg-color-overlay / --el-bg-color, popper/overlay tokens) в `frontend/public/assets/theme-tokens.css` или глобальные правила для `.el-overlay` / `.el-popper`.
— Либо ошибочно подключён «dark» вариант темы для popper’ов.

Затронутые компоненты/места
— `frontend/public/assets/theme-tokens.css` (темing токены)
— Глобальные стили: `frontend/src/assets/*` (если есть), возможные overrides в `frontend/src/main.js` (регистрация Element Plus и тема)
— Компоненты: выпадающие меню (`ElDropdown`, `ElSelect`), `ElDatePicker`, `ElPopover`, системные `ElMessageBox` (проверить).

Критерии приёмки
— Выпадающие меню, селекты, datepicker и popover’ы:
  • имеют светлый непрозрачный фон, читаемый текст и корректные тени/границы;
  • не «просвечивают» содержимое страницы;
  • сохраняют доступность: контраст ≥ WCAG AA.
— Визуальная проверка на страницах: меню пользователя, загрузка отчёта, расчёт профпригодности, создание участника (datepicker).
— E2E smoke (критический путь) проходит без адаптаций.

Технические заметки/направления фикса
— Проверить и при необходимости переопределить переменные Element Plus на уровне :root в `theme-tokens.css`:
  • --el-bg-color-overlay, --el-color-white, --el-text-color-primary, border/shadow tokens.
— Убедиться, что не активирован «dark» для popper/overlay; при необходимости добавить явные стили для `.el-popper.is-light`.
— Исключить глобальные правила, задающие прозрачность для `.el-overlay`, `.el-popper`, `.el-select__popper`, `.el-picker__popper`.

Связанные артефакты/скриншоты
— Приложены в пользовательском сообщении (меню пользователя, селект, расчёт, календарь).

Risks
— Возможное влияние на модальные окна/tooltip’ы; требуется регресc всплывающих компонентов Element Plus.

Next actions
— Диагностика токенов в `theme-tokens.css`; точечный override и визуальная проверка.

