import{l as q,m as B,n as C,c as E,d as o,w as t,r as l,e as N,p as R,o as f,q as z,v as L,u as g,f as m,x as S,a,y as K,E as w}from"./index-Cry-v9Jv.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"login-container"},A={class:"register-link"},I={__name:"LoginView",setup(T){const y=N(),p=R(),s=q(),n=B(null),r=C({email:"",password:""}),b={email:[{required:!0,message:"Введите email",trigger:"blur"},{type:"email",message:"Некорректный email",trigger:"blur"}],password:[{required:!0,message:"Введите пароль",trigger:"blur"},{min:6,message:"Пароль должен быть не менее 6 символов",trigger:"blur"}]},i=async()=>{n.value&&await n.value.validate(async c=>{if(c)try{await s.login(r.email,r.password),w.success("Вход выполнен успешно");const e=p.query.redirect||"/participants";y.push(e)}catch{w.error(s.error||"Ошибка входа")}})};return(c,e)=>{const V=l("el-alert"),_=l("el-input"),u=l("el-form-item"),v=l("el-button"),k=l("router-link"),x=l("el-form"),h=l("el-card");return f(),E("div",U,[o(h,{class:"login-card"},{header:t(()=>[...e[2]||(e[2]=[a("div",{class:"card-header"},[a("h2",null,"Вход в систему"),a("p",null,"Цифровая модель универсальных компетенций")],-1)])]),default:t(()=>[g(p).query.message==="pending"?(f(),z(V,{key:0,title:"Ожидание одобрения",type:"warning",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},{default:t(()=>[...e[3]||(e[3]=[m(" Ваш аккаунт ожидает одобрения администратором. ",-1)])]),_:1})):L("",!0),o(x,{ref_key:"formRef",ref:n,model:r,rules:b,"label-position":"top",onSubmit:S(i,["prevent"])},{default:t(()=>[o(u,{label:"Email",prop:"email"},{default:t(()=>[o(_,{modelValue:r.email,"onUpdate:modelValue":e[0]||(e[0]=d=>r.email=d),type:"email",placeholder:"Введите email",size:"large",autocomplete:"email"},null,8,["modelValue"])]),_:1}),o(u,{label:"Пароль",prop:"password"},{default:t(()=>[o(_,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=d=>r.password=d),type:"password",placeholder:"Введите пароль",size:"large","show-password":"",autocomplete:"current-password",onKeyup:K(i,["enter"])},null,8,["modelValue"])]),_:1}),o(u,null,{default:t(()=>[o(v,{type:"primary",size:"large",style:{width:"100%"},loading:g(s).loading,onClick:i},{default:t(()=>[...e[4]||(e[4]=[m(" Войти ",-1)])]),_:1},8,["loading"])]),_:1}),a("div",A,[e[6]||(e[6]=a("span",null,"Нет аккаунта?",-1)),o(k,{to:"/register"},{default:t(()=>[...e[5]||(e[5]=[m(" Зарегистрироваться ",-1)])]),_:1})])]),_:1},8,["model"])]),_:1})])}}},F=M(I,[["__scopeId","data-v-8a8c2dd8"]]);export{F as default};
