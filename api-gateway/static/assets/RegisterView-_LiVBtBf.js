import{l as b,m as P,n as h,c as x,d as r,w as s,r as a,e as E,o as R,x as k,a as n,y as C,u as z,f,E as w}from"./index-BAHjXxBQ.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"register-container"},N={class:"login-link"},S={__name:"RegisterView",setup(U){const g=E(),d=b(),u=P(null),o=h({email:"",password:"",confirmPassword:""}),c={email:[{required:!0,message:"Введите email",trigger:"blur"},{type:"email",message:"Некорректный email",trigger:"blur"}],password:[{required:!0,message:"Введите пароль",trigger:"blur"},{min:8,message:"Пароль должен быть не менее 8 символов",trigger:"blur"}],confirmPassword:[{required:!0,validator:(p,e,l)=>{e===""?l(new Error("Подтвердите пароль")):e!==o.password?l(new Error("Пароли не совпадают")):l()},trigger:"blur"}]},m=async()=>{u.value&&await u.value.validate(async p=>{if(p)try{await d.register(o.email,o.password),w.success({message:"Регистрация успешна! Ожидайте одобрения администратора.",duration:5e3}),g.push("/login?message=pending")}catch{w.error(d.error||"Ошибка регистрации")}})};return(p,e)=>{const l=a("el-input"),i=a("el-form-item"),_=a("el-button"),y=a("router-link"),V=a("el-form"),v=a("el-card");return R(),x("div",B,[r(v,{class:"register-card"},{header:s(()=>[...e[3]||(e[3]=[n("div",{class:"card-header"},[n("h2",null,"Регистрация"),n("p",null,"Создайте аккаунт для работы с системой")],-1)])]),default:s(()=>[r(V,{ref_key:"formRef",ref:u,model:o,rules:c,"label-position":"top",onSubmit:k(m,["prevent"])},{default:s(()=>[r(i,{label:"Email",prop:"email"},{default:s(()=>[r(l,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=t=>o.email=t),type:"email",placeholder:"Введите email",size:"large",autocomplete:"email"},null,8,["modelValue"])]),_:1}),r(i,{label:"Пароль",prop:"password"},{default:s(()=>[r(l,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t),type:"password",placeholder:"Введите пароль (минимум 8 символов, буквы и цифры)",size:"large","show-password":"",autocomplete:"new-password"},null,8,["modelValue"])]),_:1}),r(i,{label:"Подтверждение пароля",prop:"confirmPassword"},{default:s(()=>[r(l,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=t=>o.confirmPassword=t),type:"password",placeholder:"Повторите пароль",size:"large","show-password":"",autocomplete:"new-password",onKeyup:C(m,["enter"])},null,8,["modelValue"])]),_:1}),r(i,null,{default:s(()=>[r(_,{type:"primary",size:"large",style:{width:"100%"},loading:z(d).loading,onClick:m},{default:s(()=>[...e[4]||(e[4]=[f(" Зарегистрироваться ",-1)])]),_:1},8,["loading"])]),_:1}),n("div",N,[e[6]||(e[6]=n("span",null,"Уже есть аккаунт?",-1)),r(y,{to:"/login"},{default:s(()=>[...e[5]||(e[5]=[f(" Войти ",-1)])]),_:1})])]),_:1},8,["model"])]),_:1})])}}},I=q(S,[["__scopeId","data-v-b0659460"]]);export{I as default};
