import{u as q,r as B,a as C,c as E,b as o,w as t,d as l,e as N,f as R,o as g,g as z,h as L,i as f,j as m,k as S,l as a,m as K,E as w}from"./index-Doc1gm_3.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"login-container"},j={class:"register-link"},A={__name:"LoginView",setup(I){const y=N(),p=R(),s=q(),n=B(null),r=C({email:"",password:""}),b={email:[{required:!0,message:"Введите email",trigger:"blur"},{type:"email",message:"Некорректный email",trigger:"blur"}],password:[{required:!0,message:"Введите пароль",trigger:"blur"},{min:6,message:"Пароль должен быть не менее 6 символов",trigger:"blur"}]},i=async()=>{n.value&&await n.value.validate(async c=>{if(c)try{await s.login(r.email,r.password),w.success("Вход выполнен успешно");const e=p.query.redirect||"/participants";y.push(e)}catch{w.error(s.error||"Ошибка входа")}})};return(c,e)=>{const V=l("el-alert"),_=l("el-input"),u=l("el-form-item"),k=l("el-button"),v=l("router-link"),h=l("el-form"),x=l("el-card");return g(),E("div",U,[o(x,{class:"login-card"},{header:t(()=>[...e[2]||(e[2]=[a("div",{class:"card-header"},[a("h2",null,"Вход в систему"),a("p",null,"Цифровая модель универсальных компетенций")],-1)])]),default:t(()=>[f(p).query.message==="pending"?(g(),z(V,{key:0,title:"Ожидание одобрения",type:"warning",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},{default:t(()=>[...e[3]||(e[3]=[m(" Ваш аккаунт ожидает одобрения администратором. ",-1)])]),_:1})):L("",!0),o(h,{ref_key:"formRef",ref:n,model:r,rules:b,"label-position":"top",onSubmit:S(i,["prevent"])},{default:t(()=>[o(u,{label:"Email",prop:"email"},{default:t(()=>[o(_,{modelValue:r.email,"onUpdate:modelValue":e[0]||(e[0]=d=>r.email=d),type:"email",placeholder:"Введите email",size:"large",autocomplete:"email"},null,8,["modelValue"])]),_:1}),o(u,{label:"Пароль",prop:"password"},{default:t(()=>[o(_,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=d=>r.password=d),type:"password",placeholder:"Введите пароль",size:"large","show-password":"",autocomplete:"current-password",onKeyup:K(i,["enter"])},null,8,["modelValue"])]),_:1}),o(u,null,{default:t(()=>[o(k,{type:"primary",size:"large",style:{width:"100%"},loading:f(s).loading,onClick:i},{default:t(()=>[...e[4]||(e[4]=[m(" Войти ",-1)])]),_:1},8,["loading"])]),_:1}),a("div",j,[e[6]||(e[6]=a("span",null,"Нет аккаунта?",-1)),o(v,{to:"/register"},{default:t(()=>[...e[5]||(e[5]=[m("Зарегистрироваться",-1)])]),_:1})])]),_:1},8,["model"])]),_:1})])}}},F=M(A,[["__scopeId","data-v-a62b19ed"]]);export{F as default};
